<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Cadastrar Fornecedores</title>
    <!--/*/ <th:block th:include="fragments/head :: head"></th:block> /*/-->
</head>
<body>
    <h1>Cadastrar Fornecedor</h1>
    <br/>

    <form th:object="${fornecedor}" th:action="@{/fornecedor/cadastrar}" method="POST">
        <input type="hidden" th:field="*{id}"/>
        <label>Nome: </label>
        <input type="text" th:field="*{nome}"/><br/>
        <label>Telefone: </label>
        <input type="text" th:field="*{telefone}"/><br/>

        <br/><br/>
        <h3>Endereços</h3>
        <br/><br/>

        <div th:each="endereco, i : *{enderecos}">
            <div class="row">
                <div class="col-12 col-md-6">
                    <p th:text="'Endereço ' + ${i.index + 1}">Endereço 1</p>
                    <input type="hidden" th:field="*{enderecos[__${i.index}__].id}"/>
                </div>
                <div class="col-12 col-md-6">
                    <button type="submit" name="removerEndereco" th:value="${i.index}"
                            th:if="${#lists.size(fornecedor.enderecos) gt 1}">
                        Remover</button>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-12">
                    CEP<span style="color: red;">*</span>
                    <input type="text" th:field="*{enderecos[__${i.index}__].cep}" id="cep" maxlength="9" placeholder="CEP" onkeypress='mascaraMutuario(this,cept)' onblur='clearTimeout()' />
                    <p class="error-cep"></p>
                </div>
            </div>

            <div class="row">
                <div class="col-12 col-md-6">
                    Rua<span style="color: red;">*</span>
                    <input type="text" th:field="*{enderecos[__${i.index}__].rua}" id="rua" size="60" placeholder="Rua" readonly="readonly" />
                </div>
                <div class="col-12 col-md-6">
                    Número<span style="color: red;">*</span>
                    <input type="number" th:field="*{enderecos[__${i.index}__].numero}" id="numero" size="40" placeholder="Número" value="0" min="0" />
                </div>
            </div>

            <div class="row">
                <div class="col-12 col-md-5">
                    Bairro<span style="color: red;">*</span>
                    <input type="text" th:field="*{enderecos[__${i.index}__].bairro}" id="bairro" size="60" placeholder="Bairro" readonly="readonly" />
                </div>
                <div class="col-12 col-md-5">
                    Cidade<span style="color: red;">*</span>
                    <input type="text" th:field="*{enderecos[__${i.index}__].cidade}" id="cidade" size="40" placeholder="Cidade" value="Maringá" readonly="readonly" />
                </div>

                <div class="col-12 col-md-2">
                    UF<span style="color: red;">*</span>
                    <input type="text" th:field="*{enderecos[__${i.index}__].uf}" id="uf" size="40" placeholder="UF" value="PR" readonly="readonly" />
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-md-12">
                    Complemento
                    <input type="text" th:field="*{enderecos[__${i.index}__].complemento}" id="complemento" size="40" />
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-12 col-md-12">
                <button type="submit" name="adicionarEndereco">Novo endereço</button>
            </div>
        </div>

        <br/><br/>
        <button type="submit" name="salvar">Cadastrar fornecedor</button>
    </form>
    <br/>

    <a th:href="@{/usuario/painel}">Voltar para o painel</a>


    <!-- JQUERY -->
    <script type="text/javascript" th:src="@{https://code.jquery.com/jquery-3.2.1.min.js}" ></script>
    <!-- JAVASCRIPT REGISTER -->
    <script type="text/javascript" th:src="@{/js/cadastro.js}" ></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>

    <script th:if="${resp == 'exists'}" >
        $(function(){
            $('#myModal').modal('show');
        });
    </script>

    <script th:if="${resp == 'register'}" >
        $(function(){
            $('#myModal2').modal('show');
        });
    </script>

    <script th:if="${resp == 'confirm'}" >
        $(function(){
            $('#myModal3').modal('show');
        });
    </script>

    <script th:if="${resp == 'reset'}" >
        $(function(){
            $('#myModal4').modal('show');
        });
    </script>

    <script>
        $(document).ready(function () {
            $('input').keypress(function (e) {
                var code = null;
                code = (e.keyCode ? e.keyCode : e.which);
                return (code == 13) ? false : true;
            });
        });
    </script>
</body>
</html>